---
id: existing-project
title: Integrate Resonate into an existing project
sidebar_label: Existing project
sidebar_position: 2
---

import Tabs from "@theme/Tabs";
import TabItem from "@theme/TabItem";

**How to integrate Resonate into an existing project.**

You can integrate Resonate into an existing project by just adding the Resonate SDK as a dependency and initializing it in your Worker or Application Node.
You don't need to run a Resonate Server to get started â€” Resonate will store all promises in local memory, until you are ready to add remote invocations and long term durability to your application.

## Add the SDK to your project

Add the Resonate SDK to your project as a dependency.

<Tabs
    groupId="language"
    defaultValue="python"
    values={[
        { label: "Python", value: "python" },
        { label: "TypeScript", value: "typescript" },
    ]}
>
    <TabItem value="python">
    
Add with uv:

```shell
uv add resonate-sdk
```

Add with pip:

```shell
pip install resonate-sdk
```

    </TabItem>

    <TabItem value="typescript">

Add with npm:

```shell
npm install @resonatehq/sdk
```

Add with yarn:

```shell
yarn add @resonatehq/sdk
```

    </TabItem>

</Tabs>

## Initialize Resonate

Then, initialize Resonate in your script, worker, or application.

You can intialize Resonate in local memory, which does not require any additional dependencies (such as a Resonate Server).
This is a great way to get started and test the integration.

When you are ready to add long term durability and remote invocations, you can switch to a remote store and message source (Resonate Server).

<Tabs
    groupId="language"
    defaultValue="python"
    values={[
        { label: "Python", value: "python" },
        { label: "TypeScript", value: "typescript" },
    ]}
>

    <TabItem value="python">

```python
from resonate import Resonate

# Initialize Resonate with a local promise store
# Great for local development.
resonate = Resonate.local()

# Initialize Resonate with a remote promise store
# Great for building production grade distributed applications.
resonate = Resonate.remote()
```

    </TabItem>

    <TabItem value="typescript">

:::caution New Release in development

A new release of the The TypeScript SDK is currently in development.
The following instructions are for the current version, which will not be compatible with the new version.
We recommend waiting for the new release to be available before integrating the TypeScript SDK into your project.

:::

```typescript
import { Resonate } from "@resonatehq/sdk";

const resonate = new Resonate();
```

    </TabItem>

</Tabs>

## Register a function

Next, register a function with Resonate.
Functions registered and invoked with Resonate gain durable qualities and can be awaited on remotely.

<Tabs
    groupId="language"
    defaultValue="python"
    values={[
        { label: "Python", value: "python" },
        { label: "TypeScript", value: "typescript" },
    ]}
>

    <TabItem value="python">

Register a function with Resonate using the `register` decorator or the `register` method.

All functions registered with Resonate or called from a Resonate function must define Context as the first argument.

```python
# Register a function with the decorator
@resonate.register
def foo(ctx, arg1, arg2):
    # Your function logic here
    return result

# Register a function with the register method
def foo(ctx, arg1, arg2):
    # Your function logic here
    return result

resonate.register(foo)

# ...

resonate.start()
```

Calling `resonate.start()` explicitly starts Resonate instance threads.
It is not needed in scripts, workers, or application nodes that call `resonate.run()`, but we recommend doing so with all instances of Resonate.

    </TabItem>

    <TabItem value="typescript">

:::caution New Release in development

A new release of the The TypeScript SDK is currently in development.
The following instructions are for the current version, which will not be compatible with the new version.
We recommend waiting for the new release to be available before integrating the TypeScript SDK into your project.

:::

You can register a function with Resonate using the `register` method.
All functions registered with Resonate or called from a Resonate function must define `Context` as the first argument.

```typescript
resonate.register("custom-function-name", foo);

function foo(ctx: Context, arg1: any, arg2: any): any {
  // Your function logic here
  return result;
}
```

    </TabItem>

</Tabs>

## Invoke a function

You can invoke a function that is defined locally in the script, worker, or application node, or you can invoke a function that is defined remotely in a different worker or application .
Invoking a function locally does not require the Resonate Server, but invoking one remotely does.

<Tabs
    groupId="language"
    defaultValue="python"
    values={[
        { label: "Python", value: "python" },
        { label: "TypeScript", value: "typescript" },
    ]}
>

    <TabItem value="python">

If the function is in the same Worker or Application Node, you can invoke it directly with the run method.

```python
result = foo.run(promise_id, arg1, arg2)

# or using the Resonate instance
result = resonate.run(promise_id, "foo", arg1, arg2)
```

If the function is in a different Worker or Application Node, you can invoke it with the rpc method on the Resonate instance.
To do this, your worker must be connected to a remote store and message source (Resonate Server).

```python
result = resonate
  .options(target="<transport_plugin>://<unique_id>@<group>/<id>")
  .rpc("foo", promise_id, arg1, arg2)
```

    </TabItem>

    <TabItem value="typescript">

:::caution New Release in development

A new release of the The TypeScript SDK is currently in development.
The following instructions are for the current version, which will not be compatible with the new version.
We recommend waiting for the new release to be available before integrating the TypeScript SDK into your project.

:::

The current version of the TypeScript SDK only supports calling functions locally.
And you must use the `start` method to initialize the Resonate instance before calling any functions.

```typescript
resonate.start();

const result = resonate.run("custom-function-name", promiseId, arg1, arg2);
```

    </TabItem>

</Tabs>

## Get the result

Getting the result of a function is a blocking operation.

<Tabs
    groupId="language"
    defaultValue="python"
    values={[
        { label: "Python", value: "python" },
        { label: "TypeScript", value: "typescript" },
    ]} 
>

    <TabItem value="python">

Use the `.result()` method on the handle to get the result of the function.

```python
result = handle.result()
```

    </TabItem>

    <TabItem value="typescript">

:::caution New Release in development

A new release of the The TypeScript SDK is currently in development.
The following instructions are for the current version, which will not be compatible with the new version.
We recommend waiting for the new release to be available before integrating the TypeScript SDK into your project.

:::

Getting the result of a function is a blocking operation.

Await on the handle to get the result of the function.

```typescript
const result = await handle;
```

    </TabItem>

</Tabs>

## Extend the Call Graph

You can extend your Call Graph by invoking other functions from within a function.

All functions invoked from the instance of Resonate or the Context object return a Durable Promise, which can be awaited on.

<Tabs
    groupId="language"
    defaultValue="python"
    values={[
        { label: "Python", value: "python" },
        { label: "TypeScript", value: "typescript" },
    ]}
>

    <TabItem value="python">

```python
@resonate.register
def foo(ctx, params):
    # ...
    p1 = yield ctx.begin_run("bar", params)
    r1 = yield p1
    p2 = yield ctx.begin_run("baz", r1)
    r2 = yield p2
    return r2

def bar(ctx, params):
    # ...
    return result

def baz(ctx, params):
    # ...
    return result
```

    </TabItem>

    <TabItem value="typescript">

:::caution New Release in development

A new release of the The TypeScript SDK is currently in development.
The following instructions are for the current version, which will not be compatible with the new version.
We recommend waiting for the new release to be available before integrating the TypeScript SDK into your project.

:::

    </TabItem>

</Tabs>
